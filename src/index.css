@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* VFX Pipeline Blueprint - Infra-Deck Design System */
/* All colors in HSL */

@layer base {
  :root {
    /* Core backgrounds - Chronicle dark #1a1a1a */
    --background: 0 0% 10%;
    --foreground: 0 0% 100%;
    
    /* Card/Surface */
    --card: 0 0% 13%;
    --card-foreground: 0 0% 100%;
    --card-border: 0 0% 20%;
    
    /* Popover */
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 100%;
    
    /* Primary - White for emphasis */
    --primary: 0 0% 100%;
    --primary-foreground: 0 0% 10%;
    
    /* Secondary - Muted gray */
    --secondary: 0 0% 45%;
    --secondary-foreground: 0 0% 100%;
    
    /* Muted */
    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 55%;
    
    /* Accent - Teal highlight for special elements */
    --accent: 186 100% 42%;
    --accent-foreground: 0 0% 10%;
    
    /* Destructive */
    --destructive: 0 84% 60%;
    --destructive-foreground: 0 0% 100%;
    
    /* Borders and inputs */
    --border: 0 0% 22%;
    --input: 0 0% 22%;
    --ring: 0 0% 100%;
    
    --radius: 0.5rem;
    
    /* Chart colors */
    --chart-planning: 199 89% 60%;
    --chart-execution: 142 71% 45%;
    --chart-support: 25 95% 53%;
    --chart-maintenance: 280 65% 60%;
    
    /* Sidebar */
    --sidebar-background: 0 0% 10%;
    --sidebar-foreground: 0 0% 100%;
    --sidebar-primary: 0 0% 100%;
    --sidebar-primary-foreground: 0 0% 10%;
    --sidebar-accent: 0 0% 18%;
    --sidebar-accent-foreground: 0 0% 100%;
    --sidebar-border: 0 0% 22%;
    --sidebar-ring: 0 0% 100%;
  }

  .dark {
    --background: 0 0% 10%;
    --foreground: 0 0% 100%;
    --card: 0 0% 13%;
    --card-foreground: 0 0% 100%;
    --popover: 0 0% 12%;
    --popover-foreground: 0 0% 100%;
    --primary: 0 0% 100%;
    --primary-foreground: 0 0% 10%;
    --secondary: 0 0% 45%;
    --secondary-foreground: 0 0% 100%;
    --muted: 0 0% 18%;
    --muted-foreground: 0 0% 55%;
    --accent: 186 100% 42%;
    --accent-foreground: 0 0% 10%;
    --destructive: 0 62% 30%;
    --destructive-foreground: 0 0% 100%;
    --border: 0 0% 22%;
    --input: 0 0% 22%;
    --ring: 0 0% 100%;
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html {
    /* Native smooth scrolling */
    scroll-behavior: smooth;
    /* Allows scrollIntoView to account for the fixed top nav */
    scroll-padding-top: 5rem;
  }

  body {
    @apply bg-background text-foreground font-sans antialiased;
    font-family: 'Inter', system-ui, -apple-system, sans-serif;
    background-color: #0e100f;
    overscroll-behavior: none;
    margin: 0;
    padding: 0;
    overflow-x: hidden;
  }
}

/* Main panels container */
.panels-container {
  position: relative;
  width: 100%;
  min-height: 100vh;
  padding-top: 0; /* Navbar is fixed, doesn't affect flow */
}

/* Navbar - ensure it's on top and isolated */
.main-tool-bar {
  position: fixed !important;
  top: 0;
  left: 0;
  right: 0;
  z-index: 9999 !important; /* Above everything */
  will-change: transform;
}

/* Section base styles - 1080p minimum height with centered content */
.slide-section {
  width: 100%;
  position: relative;
  min-height: 1080px; /* Full HD minimum height */
  display: flex;
  flex-direction: column;
  justify-content: center; /* Center content vertically when shorter than 1080px */
  align-items: stretch; /* Stretch to full width */
  padding-top: 5rem; /* Space for fixed navbar */
  padding-bottom: 5rem; /* Bottom padding for spacing */
  /* Solid backgrounds applied via ID selectors below */
  /* Background stays static - only content animates */
  transform: none !important; /* Ensure section background never moves */
}

/* Title section - special styling */
#title {
  padding-top: 0 !important; /* No top padding for title */
  min-height: 1080px; /* Same 1080p minimum */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  background-color: #0e100f;
}

/* Alternating solid colored and dark backgrounds for all sections after title */
/* Pattern: colored, dark, colored, dark, etc. */
/* Dark background: #0e100f (matching title background) */

/* GRADIENT BACKGROUNDS FOR SECTIONS */
/* Using CSS equivalents of SVG linear gradients */

/* Structure (1st after title) - Warm grey to cool grey gradient */
#structure {
  background: linear-gradient(135deg, #8b7d6b 20%, #6b6b7d 80%); /* Warm grey to cool grey */
}

/* Roles (2nd) - dark */
#roles {
  background-color: #0e100f;
}

/* Responsibility/Matrix (3rd) - Light Pink to Purple gradient */
#responsibility {
  background: linear-gradient(135deg, #ffd3fd 27%, #806eff 84%);
}

/* Pipeline (4th) - dark */
/* Pipeline section removed */

/* USD section removed - merged into Assets section */

/* Assets (6th) - dark */
#assets {
  background-color: #0e100f;
}

/* ACES (7th) - Warm grey to cool grey gradient */
#aces {
  background: linear-gradient(135deg, #8b7d6b 20%, #6b6b7d 80%); /* Warm grey to cool grey */
}

/* REZ (8th) - dark */
#rez {
  background-color: #0e100f;
}

/* Infrastructure (9th) - Warm grey to cool grey gradient */
#render {
  background: linear-gradient(135deg, #8b7d6b 20%, #6b6b7d 80%); /* Warm grey to cool grey */
}

/* AI (10th) - dark */
#ai {
  background-color: #0e100f;
}

/* Disruption - Warm grey to cool grey gradient */
#disruption {
  background: linear-gradient(135deg, #8b7d6b 20%, #6b6b7d 80%); /* Warm grey to cool grey */
}

/* Timeline (11th) - Warm grey to cool grey gradient */
#timeline {
  background: linear-gradient(135deg, #8b7d6b 20%, #6b6b7d 80%); /* Warm grey to cool grey */
}

/* NOISE TEXTURE OVERLAY FOR COLORED SECTIONS */
/* Adds subtle texture using noise.webp with color-dodge blend mode */

#structure,
#responsibility,
#aces,
#render,
#disruption,
#timeline {
  position: relative;
  overflow: hidden;
}

#structure::after,
#responsibility::after,
#aces::after,
#render::after,
#disruption::after,
#timeline::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-blend-mode: color-dodge;
  background-image: url('/src/assets/noise.webp');
  background-repeat: repeat;
  background-size: 100px 100px; /* Smaller size = more visible noise */
  pointer-events: none; /* Allow clicks through the overlay */
  z-index: 1;
  opacity: 1.0; /* Maximum opacity for pronounced effect */
}

/* All sections now have pronounced noise via the main rule above */

/* Ensure content is above the noise overlay */
#structure .slide-content,
#responsibility .slide-content,
#aces .slide-content,
#render .slide-content,
#disruption .slide-content,
#timeline .slide-content {
  position: relative;
  z-index: 2;
}

/* TEXT COLOR RULES FOR DARK VS COLORED BACKGROUNDS */
/* Apply dark text on colored sections for readability */

/* Dark sections - use yellow for headings */
#title h1, #title h2, #title h3,
#roles h1, #roles h2, #roles h3,
#assets h1, #assets h2, #assets h3, #assets h4, #assets h5, #assets h6,
#rez h1, #rez h2, #rez h3,
#ai h1, #ai h2, #ai h3 {
  color: #fdf800 !important;
}

/* Ensure FeatureColumns heading in assets section is yellow */
#assets h2.text-foreground {
  color: #fdf800 !important;
}

#title h4, #title h5, #title h6,
#roles h4, #roles h5, #roles h6,
#assets h4, #assets h5, #assets h6,
#rez h4, #rez h5, #rez h6,
#ai h4, #ai h5, #ai h6 {
  color: hsl(var(--text-on-dark-subheading));
}

#title p, #title li,
#roles p, #roles li,
#assets p, #assets li,
#rez p, #rez li,
#ai p, #ai li {
  color: hsl(var(--text-on-dark-paragraph));
}

#title a,
#roles a,
#assets a,
#rez a,
#ai a {
  color: hsl(var(--text-on-dark-link));
}

/* Colored sections - use dark text (almost black for readability) */
#structure h1, #structure h2, #structure h3,
#responsibility h1, #responsibility h2, #responsibility h3,
#timeline h1, #timeline h2, #timeline h3 {
  color: #0e100f !important; /* Dark background color - fallback */
  color: hsl(var(--text-on-colored-heading, 0 0% 6%)) !important;
}

/* Infrastructure section - use yellow for main headings (h1, h2) */
#render h1, #render h2 {
  color: #fdf800 !important;
}

/* All other text, icons, and lines light in Infrastructure section */
#render h3, #render h4, #render h5, #render h6,
#render p, #render li, #render span,
#render .text-foreground, #render .text-muted-foreground,
#render .border, #render [class*="border"],
#render hr, #render .border-border {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
}

/* Lucide icons in Infrastructure section - use stroke, not fill */
#render svg {
  color: #ffffff !important;
}

#render svg path,
#render svg circle,
#render svg rect,
#render svg line,
#render svg polyline,
#render svg polygon {
  stroke: #ffffff !important;
  fill: none !important;
}

/* Override hardcoded dark icon colors in Infrastructure section */
#render [class*="text-[#0e100f]"],
#render .w-8.h-8 svg,
#render .w-6.h-6 svg {
  color: #ffffff !important;
}

#render [class*="text-[#0e100f]"] svg path,
#render .w-8.h-8 svg path,
#render .w-6.h-6 svg path {
  stroke: #ffffff !important;
  fill: none !important;
}

/* ACES section - use yellow for main headings (h1, h2) */
#aces h1, #aces h2 {
  color: #fdf800 !important;
}

/* All other text, icons, and lines light in ACES section */
#aces h3, #aces h4, #aces h5, #aces h6,
#aces p, #aces li, #aces span,
#aces .text-foreground, #aces .text-muted-foreground,
#aces .border, #aces [class*="border"],
#aces hr, #aces .border-border {
  color: #ffffff !important;
  border-color: rgba(255, 255, 255, 0.3) !important;
}

/* Lucide icons in ACES section - use stroke, not fill */
#aces svg {
  color: #ffffff !important;
}

#aces svg path,
#aces svg circle,
#aces svg rect,
#aces svg line,
#aces svg polyline,
#aces svg polygon {
  stroke: #ffffff !important;
  fill: none !important;
}

/* Override hardcoded dark icon colors in ACES section */
#aces [class*="text-[#0e100f]"],
#aces .w-8.h-8 svg,
#aces .w-6.h-6 svg {
  color: #ffffff !important;
}

#aces [class*="text-[#0e100f]"] svg path,
#aces .w-8.h-8 svg path,
#aces .w-6.h-6 svg path {
  stroke: #ffffff !important;
  fill: none !important;
}

/* Disruption section - use yellow for main headings only (h1, h2) */
#disruption h1, #disruption h2 {
  color: #fdf800 !important;
}

/* Keep subheaders (h3, h4, etc.) white in Disruption section */
#disruption h3, #disruption h4, #disruption h5, #disruption h6 {
  color: #ffffff !important;
}

#structure h4, #structure h5, #structure h6,
#responsibility h4, #responsibility h5, #responsibility h6,
#timeline h4, #timeline h5, #timeline h6 {
  color: #1e1e1e !important; /* Dark gray - fallback */
  color: hsl(var(--text-on-colored-subheading, 0 0% 12%));
}

#structure p, #structure li, #structure span,
#responsibility p, #responsibility li, #responsibility span,
#aces p, #aces li, #aces span,
#timeline p, #timeline li, #timeline span {
  color: #191919 !important; /* Near black - fallback */
  color: hsl(var(--text-on-colored-paragraph, 0 0% 10%)) !important;
}

/* Override timeline text color for GanttChart dark background */
#timeline .gantt-chart-dark .gantt-title,
#timeline .gantt-chart-dark h3.gantt-title {
  color: #ffffff !important;
}

#timeline .gantt-chart-dark .gantt-month,
#timeline .gantt-chart-dark div.gantt-month {
  color: rgba(255, 255, 255, 0.7) !important;
}

#timeline .gantt-chart-dark .gantt-week,
#timeline .gantt-chart-dark div.gantt-week {
  color: rgba(255, 255, 255, 0.6) !important;
}

#timeline .gantt-chart-dark .gantt-label,
#timeline .gantt-chart-dark span.gantt-label {
  color: rgba(255, 255, 255, 0.7) !important;
}

#structure a,
#responsibility a,
#aces a,
#render a,
#disruption a,
#timeline a {
  color: #0e100f !important; /* Dark - fallback */
  color: hsl(var(--text-on-colored-link, 0 0% 6%));
  text-decoration: underline;
}

/* Override text color for dark cards in ACES section - must be more specific than #aces p */
#aces .aces-dark-card p,
#aces .aces-dark-card p.aces-card-text,
#aces .aces-dark-card .aces-card-text,
#aces .aces-dark-card svg,
#aces .aces-dark-card svg.aces-card-icon,
#aces .aces-dark-card .aces-card-icon {
  color: #ffffff !important;
}

/* Removed panel styling - using natural scroll now */

@layer components {
  /* Slide section base - minimal styles, main styles defined above */
  .slide-content {
    @apply max-w-[1200px] mx-auto w-full;
    /* Content will be centered within the section */
    flex: 0 0 auto; /* Don't grow/shrink, use natural size */
  }
  
  /* Chronicle-style card with left border */
  .deck-card {
    @apply bg-transparent border-l-2 border-border pl-6 py-2;
  }
  
  /* Filled card style */
  .deck-card-filled {
    @apply bg-card rounded-xl p-6 border border-border;
  }
  
  /* Table styles - Chronicle clean style */
  .deck-table {
    @apply w-full border-collapse bg-card/50 rounded-lg overflow-hidden;
  }
  
  .deck-table th {
    @apply text-left py-4 px-5 text-sm font-medium text-accent bg-muted/30;
  }
  
  .deck-table td {
    @apply py-4 px-5 text-sm text-muted-foreground border-t border-border/30;
  }
  
  /* Row hover removed - using cell hover in MatrixTable component instead */
  
  /* Navigation */
  .nav-link {
    @apply text-sm text-muted-foreground hover:text-foreground transition-colors duration-200;
  }
  
  .nav-link-active {
    @apply text-foreground;
  }
  
  /* Chronicle highlight text */
  .text-highlight {
    @apply text-foreground;
  }
  
  .text-dim {
    @apply text-muted-foreground;
  }
}

/* Matrix Table Component Styles - Reusable Widget */
/* Placed after @layer components to ensure they override default deck-table styles */
.deck-table.matrix-dark {
  background-color: #0e100f !important;
  border-radius: 0.5rem !important;
  padding: 1rem !important;
}

.deck-table.matrix-dark th {
  background-color: rgba(14, 16, 15, 0.8) !important;
  background: rgba(14, 16, 15, 0.8) !important; /* Override any @apply bg styles */
  color: hsl(var(--text-on-dark-heading)) !important;
  text-align: left !important;
  padding: 1rem 1.25rem !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
}

.deck-table.matrix-dark td {
  color: hsl(var(--text-on-dark-paragraph)) !important;
  padding: 1rem 1.25rem !important;
  font-size: 0.875rem !important;
  border-top: 1px solid rgba(255, 255, 255, 0.05) !important;
}

/* Vertical borders for matrix */
.deck-table.matrix-borders th.matrix-border-right {
  border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.deck-table.matrix-borders th:last-child {
  border-right: none !important;
}

.deck-table.matrix-borders td.matrix-border-right {
  border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.deck-table.matrix-borders td:last-child {
  border-right: none !important;
}

/* Cell hover for matrix (only highlight the cell under cursor) */
.deck-table.matrix-cell-hover td:hover,
.matrix-cell-hover-cell:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
  transition: background-color 0.2s ease;
}

.deck-table.matrix-cell-hover th:hover {
  background-color: rgba(255, 255, 255, 0.15) !important;
  transition: background-color 0.2s ease;
}

@layer utilities {
  /* Animation utilities */
  .animate-fade-up {
    animation: fadeUp 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* Longer duration and smoother easing */
    opacity: 0.9;
  }
  
  .animate-fade-down {
    animation: fadeDown 0.9s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards; /* Slide in from above */
    opacity: 0.9;
  }
  
  .animation-delay-100 {
    animation-delay: 100ms;
  }
  
  .animation-delay-200 {
    animation-delay: 200ms;
  }
  
  .animation-delay-300 {
    animation-delay: 300ms;
  }
  
  .animation-delay-400 {
    animation-delay: 400ms;
  }
  
  .animation-delay-500 {
    animation-delay: 500ms;
  }
}

@keyframes fadeUp {
  from {
    opacity: 0.9;
    transform: translateY(80px); /* Increased from 20px for more noticeable movement */
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fadeDown {
  from {
    opacity: 0.9;
    transform: translateY(-80px); /* Slide in from above */
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Matrix Table Component Styles - Reusable Widget */
/* Placed at the end to ensure they override all default deck-table styles */
.deck-table.matrix-dark {
  background-color: #0e100f !important;
  border-radius: 0.5rem !important;
  padding: 1rem !important;
}

.deck-table.matrix-dark th {
  background-color: rgba(14, 16, 15, 0.8) !important;
  background: rgba(14, 16, 15, 0.8) !important; /* Override any @apply bg styles */
  color: hsl(var(--text-on-dark-heading)) !important;
  text-align: left !important;
  padding: 1rem 1.25rem !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
}

.deck-table.matrix-dark td {
  color: hsl(var(--text-on-dark-paragraph)) !important;
  padding: 1rem 1.25rem !important;
  font-size: 0.875rem !important;
  border-top: 1px solid rgba(255, 255, 255, 0.05) !important;
}

/* Vertical borders for matrix */
.deck-table.matrix-borders th.matrix-border-right {
  border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.deck-table.matrix-borders th:last-child {
  border-right: none !important;
}

.deck-table.matrix-borders td.matrix-border-right {
  border-right: 1px solid rgba(255, 255, 255, 0.1) !important;
}

.deck-table.matrix-borders td:last-child {
  border-right: none !important;
}

/* Cell hover for matrix (only highlight the cell under cursor) */
.deck-table.matrix-cell-hover td:hover,
.matrix-cell-hover-cell:hover {
  background-color: rgba(255, 255, 255, 0.1) !important;
  transition: background-color 0.2s ease;
}

.deck-table.matrix-cell-hover th:hover {
  background-color: rgba(255, 255, 255, 0.15) !important;
  transition: background-color 0.2s ease;
}
